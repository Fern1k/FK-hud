<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FK-HUD Object Test</title>
    <script src="http://localhost:8080/dist/index.js" defer></script>
    <script src="http://localhost:8080/show_carhud.js" defer></script>
    <script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://localhost:8080/styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="carhud newCarhud" carhud>
        <div class="location">
            <div class="fuel element" fuel>
                <i class="fa-solid fa-gas-pump"></i>
            </div>
            <div class="direction">
                <i class="fa-light fa-location-arrow" heading></i>
                <p direction>North-East</p>
            </div>
            <div class="street box" street>
                Alta St.
            </div>
        </div>
        <div class="speedometer">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 36" class="speedometer-part tacho overlay">
                <defs>
                    <linearGradient id="tachograd" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color: var(--primary); stop-opacity: 1" />
                        <stop offset="100%" style="stop-color: var(--primary); stop-opacity: 1" />
                    </linearGradient>
                </defs>
                <path class="circle" stroke-dasharray="75, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 36" class="speedometer-part tacho">
                <defs>
                    <linearGradient id="tachograd" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color: var(--primary); stop-opacity: 1" />
                        <stop offset="100%" style="stop-color: var(--primary); stop-opacity: 1" />
                    </linearGradient>
                </defs>
                <path class="circle" turnoverBar stroke-dasharray="75, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            </svg>
            <div class="info-speed">
                <h1 speed>104</h1>
                <p>KM/H</p>
            </div>
        </div>
        <div class="gear-display">
            <p>GEAR</p>
            <span gear>1</span>
        </div>
    </div>

    <script>
        console.log('FK-HUD Object Test: Starting...');
        
        // Wait for everything to load
        setTimeout(() => {
            console.log('FK-HUD Object Test: Testing problematic object data...');
            
            // Test 1: Send object data that would cause [object Object]
            window.postMessage({
                data: {
                    action: 'updateCarhud',
                    isInVehicle: true,
                    street: { name: 'Main Street', id: 123 },
                    speed: { value: 50, unit: 'km/h' },
                    gear: { current: 3, max: 5 },
                    fuel: { level: 75, capacity: 100 },
                    direction: { value: 'NE', name: 'North-East' }
                }
            }, '*');
            
            setTimeout(() => {
                console.log('FK-HUD Object Test: Testing with proper string values...');
                
                // Test 2: Send proper string/number data
                window.postMessage({
                    data: {
                        action: 'updateCarhud',
                        street: 'Proper Street Name',
                        speed: 60,
                        gear: 4,
                        fuel: 80,
                        direction: 'N'
                    }
                }, '*');
            }, 3000);
            
        }, 2000);
    </script>
</body>
</html>